{% from "pagination.html" import render_pagination %}
{% extends "layout.html" %}
{% block body %}

<div class="container-fluid">
  {% for message in get_flashed_messages() %}
  <div class=flash>{{ message }}</div>
  {% endfor %}
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12 col-md-12">

      <table
          id="signedTable"
          data-toggle="table"
          data-url="/signed.json"
          data-classes="table table-hover table-condensed"
          data-striped="true"
          data-sort-name="signdate"
          data-search="true"
          data-show-refresh="true"
          data-show-toggle="true"
          data-show-columns="true"
          data-toolbar="#toolbar"
          data-pagination="true"
          data-side-pagination="server"
          data-page-list="[5, 10, 20, 50, 100, 200]"
          data-page-size=10>
        <thead>
        <tr>
          <th class="col-xs-4 col-sm-2 col-lg-1" data-field="signdate" data-sortable="true">Date</th>
          <th class="col-xs-4 col-sm-2 col-lg-1" data-field="sign" data-sortable="true">Signed by</th>
          <th class="col-xs-4 col-sm-2 col-lg-1" data-field="created" data-sortable="true">Date signed</th>
          <th class="col-xs-4 col-sm-6 col-lg-8" data-field="message">Message</th>
          <th class="col-xs-4 col-sm-2 col-lg-1" data-field="action" data-formatter="actionFormatter" data-events="actionEvents"></th>
        </tr>
        </thead>
        <tbody>
        </tbody>
      </table>
      </div>
    </div>
  </div>
</div>

<script type="text/javascript">
  function actionFormatter(value, row, index) {
    return [
      '<a class="edit ml10" href="javascript:void(0)" title="Edit">',
      '<i class="glyphicon glyphicon-edit"></i>',
      '</a>',
    ].join('');
  }

  window.actionEvents = {
    'click .edit': function (e, value, row, index) {
      window.location.assign('/log-entries/' + row['signdate']);
    }
  };
</script>

{% endblock %}
